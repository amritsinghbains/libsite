<html>
<head>
<title>jquery.ajaxchimp.min.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: rgb(0,0,0); font-weight: normal; font-style: normal; }
.s0 { color: rgb(0,0,0); }
.s1 { color: rgb(0,0,128); font-weight: bold; }
.s2 { color: rgb(0,0,0); }
.s3 { color: rgb(0,128,0); font-weight: bold; }
.s4 { color: rgb(0,0,255); }
</style>
</head>
<BODY BGCOLOR="#ffffff">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#C0C0C0" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
jquery.ajaxchimp.min.js</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">$</span><span class="s0">){</span><span class="s3">&quot;use strict&quot;</span><span class="s2">;$</span><span class="s0">.</span><span class="s2">ajaxChimp=</span><span class="s0">{</span><span class="s2">responses:</span><span class="s0">{</span><span class="s3">&quot;We have sent you a confirmation email&quot;</span><span class="s2">:</span><span class="s4">0</span><span class="s2">,</span><span class="s3">&quot;Please enter a value&quot;</span><span class="s2">:</span><span class="s4">1</span><span class="s2">,</span><span class="s3">&quot;An email address must contain a single @&quot;</span><span class="s2">:</span><span class="s4">2</span><span class="s2">,</span><span class="s3">&quot;The domain portion of the email address is invalid (the portion after the @: )&quot;</span><span class="s2">:</span><span class="s4">3</span><span class="s2">,</span><span class="s3">&quot;The username portion of the email address is invalid (the portion before the @: )&quot;</span><span class="s2">:</span><span class="s4">4</span><span class="s2">,</span><span class="s3">&quot;This email address looks fake or invalid. Please enter a real email address&quot;</span><span class="s2">:</span><span class="s4">5</span><span class="s0">}</span><span class="s2">,translations:</span><span class="s0">{</span><span class="s2">en:</span><span class="s1">null</span><span class="s0">}</span><span class="s2">,init:</span><span class="s1">function</span><span class="s0">(</span><span class="s2">selector,options</span><span class="s0">){</span><span class="s2">$</span><span class="s0">(</span><span class="s2">selector</span><span class="s0">).</span><span class="s2">ajaxChimp</span><span class="s0">(</span><span class="s2">options</span><span class="s0">)}}</span><span class="s2">;$</span><span class="s0">.</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">ajaxChimp=</span><span class="s1">function</span><span class="s0">(</span><span class="s2">options</span><span class="s0">){</span><span class="s2">$</span><span class="s0">(</span><span class="s1">this</span><span class="s0">).</span><span class="s2">each</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">i,elem</span><span class="s0">){</span><span class="s1">var </span><span class="s2">form=$</span><span class="s0">(</span><span class="s2">elem</span><span class="s0">)</span><span class="s2">;</span><span class="s1">var </span><span class="s2">email=form</span><span class="s0">.</span><span class="s2">find</span><span class="s0">(</span><span class="s3">&quot;input[type=email]&quot;</span><span class="s0">)</span><span class="s2">;</span><span class="s1">var </span><span class="s2">label=form</span><span class="s0">.</span><span class="s2">find</span><span class="s0">(</span><span class="s3">&quot;label[for=&quot;</span><span class="s2">+email</span><span class="s0">.</span><span class="s2">attr</span><span class="s0">(</span><span class="s3">&quot;id&quot;</span><span class="s0">)</span><span class="s2">+</span><span class="s3">&quot;]&quot;</span><span class="s0">)</span><span class="s2">;</span><span class="s1">var </span><span class="s2">settings=$</span><span class="s0">.</span><span class="s2">extend</span><span class="s0">({</span><span class="s2">url:form</span><span class="s0">.</span><span class="s2">attr</span><span class="s0">(</span><span class="s3">&quot;action&quot;</span><span class="s0">)</span><span class="s2">,language:</span><span class="s3">&quot;en&quot;</span><span class="s0">}</span><span class="s2">,options</span><span class="s0">)</span><span class="s2">;</span><span class="s1">var </span><span class="s2">url=settings</span><span class="s0">.</span><span class="s2">url</span><span class="s0">.</span><span class="s2">replace</span><span class="s0">(</span><span class="s3">&quot;/post?&quot;</span><span class="s2">,</span><span class="s3">&quot;/post-json?&quot;</span><span class="s0">).</span><span class="s2">concat</span><span class="s0">(</span><span class="s3">&quot;&amp;c=?&quot;</span><span class="s0">)</span><span class="s2">;form</span><span class="s0">.</span><span class="s2">attr</span><span class="s0">(</span><span class="s3">&quot;novalidate&quot;</span><span class="s2">,</span><span class="s3">&quot;true&quot;</span><span class="s0">)</span><span class="s2">;email</span><span class="s0">.</span><span class="s2">attr</span><span class="s0">(</span><span class="s3">&quot;name&quot;</span><span class="s2">,</span><span class="s3">&quot;EMAIL&quot;</span><span class="s0">)</span><span class="s2">;form</span><span class="s0">.</span><span class="s2">submit</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(){</span><span class="s1">function </span><span class="s2">successCallback</span><span class="s0">(</span><span class="s2">resp</span><span class="s0">){</span><span class="s1">if</span><span class="s0">(</span><span class="s2">resp</span><span class="s0">.</span><span class="s2">result===</span><span class="s3">&quot;success&quot;</span><span class="s0">){</span><span class="s2">msg=</span><span class="s3">&quot;We have sent you a confirmation email&quot;</span><span class="s2">;label</span><span class="s0">.</span><span class="s2">removeClass</span><span class="s0">(</span><span class="s3">&quot;error&quot;</span><span class="s0">).</span><span class="s2">addClass</span><span class="s0">(</span><span class="s3">&quot;valid&quot;</span><span class="s0">)</span><span class="s2">;email</span><span class="s0">.</span><span class="s2">removeClass</span><span class="s0">(</span><span class="s3">&quot;error&quot;</span><span class="s0">).</span><span class="s2">addClass</span><span class="s0">(</span><span class="s3">&quot;valid&quot;</span><span class="s0">)}</span><span class="s1">else</span><span class="s0">{</span><span class="s2">email</span><span class="s0">.</span><span class="s2">removeClass</span><span class="s0">(</span><span class="s3">&quot;valid&quot;</span><span class="s0">).</span><span class="s2">addClass</span><span class="s0">(</span><span class="s3">&quot;error&quot;</span><span class="s0">)</span><span class="s2">;label</span><span class="s0">.</span><span class="s2">removeClass</span><span class="s0">(</span><span class="s3">&quot;valid&quot;</span><span class="s0">).</span><span class="s2">addClass</span><span class="s0">(</span><span class="s3">&quot;error&quot;</span><span class="s0">)</span><span class="s2">;</span><span class="s1">var </span><span class="s2">index=-</span><span class="s4">1</span><span class="s2">;</span><span class="s1">var </span><span class="s2">msg;</span><span class="s1">try</span><span class="s0">{</span><span class="s1">var </span><span class="s2">parts=resp</span><span class="s0">.</span><span class="s2">msg</span><span class="s0">.</span><span class="s2">split</span><span class="s0">(</span><span class="s3">&quot; - &quot;</span><span class="s2">,</span><span class="s4">2</span><span class="s0">)</span><span class="s2">;</span><span class="s1">if</span><span class="s0">(</span><span class="s2">parts</span><span class="s0">[</span><span class="s4">1</span><span class="s0">]</span><span class="s2">===undefined</span><span class="s0">){</span><span class="s2">msg=resp</span><span class="s0">.</span><span class="s2">msg</span><span class="s0">}</span><span class="s1">else</span><span class="s0">{</span><span class="s1">var </span><span class="s2">i=parseInt</span><span class="s0">(</span><span class="s2">parts</span><span class="s0">[</span><span class="s4">0</span><span class="s0">]</span><span class="s2">,</span><span class="s4">10</span><span class="s0">)</span><span class="s2">;</span><span class="s1">if</span><span class="s0">(</span><span class="s2">i</span><span class="s0">.</span><span class="s2">toString</span><span class="s0">()</span><span class="s2">===parts</span><span class="s0">[</span><span class="s4">0</span><span class="s0">]){</span><span class="s2">index=parts</span><span class="s0">[</span><span class="s4">0</span><span class="s0">]</span><span class="s2">;msg=parts</span><span class="s0">[</span><span class="s4">1</span><span class="s0">]}</span><span class="s1">else</span><span class="s0">{</span><span class="s2">index=-</span><span class="s4">1</span><span class="s2">;msg=resp</span><span class="s0">.</span><span class="s2">msg</span><span class="s0">}}}</span><span class="s1">catch</span><span class="s0">(</span><span class="s2">e</span><span class="s0">){</span><span class="s2">index=-</span><span class="s4">1</span><span class="s2">;msg=resp</span><span class="s0">.</span><span class="s2">msg</span><span class="s0">}}</span><span class="s1">if</span><span class="s0">(</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">language!==</span><span class="s3">&quot;en&quot;</span><span class="s2">&amp;&amp;$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">responses</span><span class="s0">[</span><span class="s2">msg</span><span class="s0">]</span><span class="s2">&amp;&amp;$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">translations&amp;&amp;$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">translations</span><span class="s0">[</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">language</span><span class="s0">]</span><span class="s2">&amp;&amp;$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">translations</span><span class="s0">[</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">language</span><span class="s0">][</span><span class="s2">$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">responses</span><span class="s0">[</span><span class="s2">msg</span><span class="s0">]]){</span><span class="s2">msg=$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">translations</span><span class="s0">[</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">language</span><span class="s0">][</span><span class="s2">$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">responses</span><span class="s0">[</span><span class="s2">msg</span><span class="s0">]]}</span><span class="s2">label</span><span class="s0">.</span><span class="s2">html</span><span class="s0">(</span><span class="s2">msg</span><span class="s0">)</span><span class="s2">;label</span><span class="s0">.</span><span class="s2">show</span><span class="s0">(</span><span class="s4">2e3</span><span class="s0">)</span><span class="s2">;</span><span class="s1">if</span><span class="s0">(</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">callback</span><span class="s0">){</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">callback</span><span class="s0">(</span><span class="s2">resp</span><span class="s0">)}}</span><span class="s1">var </span><span class="s2">data=</span><span class="s0">{}</span><span class="s2">;</span><span class="s1">var </span><span class="s2">dataArray=form</span><span class="s0">.</span><span class="s2">serializeArray</span><span class="s0">()</span><span class="s2">;$</span><span class="s0">.</span><span class="s2">each</span><span class="s0">(</span><span class="s2">dataArray,</span><span class="s1">function</span><span class="s0">(</span><span class="s2">index,item</span><span class="s0">){</span><span class="s2">data</span><span class="s0">[</span><span class="s2">item</span><span class="s0">.</span><span class="s2">name</span><span class="s0">]</span><span class="s2">=item</span><span class="s0">.</span><span class="s2">value</span><span class="s0">})</span><span class="s2">;$</span><span class="s0">.</span><span class="s2">ajax</span><span class="s0">({</span><span class="s2">url:url,data:data,success:successCallback,dataType:</span><span class="s3">&quot;jsonp&quot;</span><span class="s2">,error:</span><span class="s1">function</span><span class="s0">(</span><span class="s2">resp,text</span><span class="s0">){</span><span class="s2">console</span><span class="s0">.</span><span class="s2">log</span><span class="s0">(</span><span class="s3">&quot;mailchimp ajax submit error: &quot;</span><span class="s2">+text</span><span class="s0">)}})</span><span class="s2">;</span><span class="s1">var </span><span class="s2">submitMsg=</span><span class="s3">&quot;Submitting...&quot;</span><span class="s2">;</span><span class="s1">if</span><span class="s0">(</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">language!==</span><span class="s3">&quot;en&quot;</span><span class="s2">&amp;&amp;$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">translations&amp;&amp;$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">translations</span><span class="s0">[</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">language</span><span class="s0">]</span><span class="s2">&amp;&amp;$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">translations</span><span class="s0">[</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">language</span><span class="s0">][</span><span class="s3">&quot;submit&quot;</span><span class="s0">]){</span><span class="s2">submitMsg=$</span><span class="s0">.</span><span class="s2">ajaxChimp</span><span class="s0">.</span><span class="s2">translations</span><span class="s0">[</span><span class="s2">settings</span><span class="s0">.</span><span class="s2">language</span><span class="s0">][</span><span class="s3">&quot;submit&quot;</span><span class="s0">]}</span><span class="s2">label</span><span class="s0">.</span><span class="s2">html</span><span class="s0">(</span><span class="s2">submitMsg</span><span class="s0">).</span><span class="s2">show</span><span class="s0">(</span><span class="s4">2e3</span><span class="s0">)</span><span class="s2">;</span><span class="s1">return false</span><span class="s0">})})</span><span class="s2">;</span><span class="s1">return this</span><span class="s0">}})(</span><span class="s2">jQuery</span><span class="s0">)</span><span class="s2">;</span></pre>
</body>
</html>